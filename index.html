<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Hambok-mentoring-flask by smarteen</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Hambok-mentoring-flask</h1>
        <p>hambok-mentoring-flask</p>

        <p class="view"><a href="https://github.com/smarteen/hambok-mentoring-flask">View the Project on GitHub <small>smarteen/hambok-mentoring-flask</small></a></p>


        <ul>
          <li><a href="https://github.com/smarteen/hambok-mentoring-flask/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/smarteen/hambok-mentoring-flask/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/smarteen/hambok-mentoring-flask">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="%EC%88%98%EC%97%B4%EC%9D%B4%EC%9D%98-%ED%96%84%EB%B3%B6%ED%95%9C-%EB%A9%98%ED%86%A0%EB%A7%81---flask" class="anchor" href="#%EC%88%98%EC%97%B4%EC%9D%B4%EC%9D%98-%ED%96%84%EB%B3%B6%ED%95%9C-%EB%A9%98%ED%86%A0%EB%A7%81---flask"><span class="octicon octicon-link"></span></a>수열이의 햄볶한 멘토링 - Flask</h1>

<h2>
<a name="1-flask-%EA%B8%B0%EB%B3%B8-%EC%84%B8%ED%8C%85" class="anchor" href="#1-flask-%EA%B8%B0%EB%B3%B8-%EC%84%B8%ED%8C%85"><span class="octicon octicon-link"></span></a>1. Flask 기본 세팅</h2>

<h3>
<a name="1-1-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BDvirtualenv-%EC%84%B8%ED%8C%85" class="anchor" href="#1-1-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BDvirtualenv-%EC%84%B8%ED%8C%85"><span class="octicon octicon-link"></span></a>1-1. 가상환경(virtualenv) 세팅</h3>

<p>작업중인 디렉토리에서 <code>virtualenv venv</code> 명령어를 입력해서 <code>venv</code> 폴더를 가상환경 설정폴더로 지정한다.</p>

<pre><code>$ virtualenv venv
New python executable in venv/bin/python
Installing setuptools............done.
Installing pip...............done.
</code></pre>

<p>가상환경 세팅이 완료되면 <code>venv</code> 폴더에 가상환경 관련 파일들이 담겨지게 된다.</p>

<p>현재 디렉토리의 가상환경으로 활성화시키려면 <code>. venv/bin/activate</code> 명령어를 입력하면 된다.</p>

<pre><code>$ . venv/bin/activate
(venv)$
</code></pre>

<p>가상환경이 활성화되어있으면 쉘에 <code>(venv)</code>가 표시된다. 가상환경을 비활성화시키려면 <code>deactivate</code> 명령어를 입력하면 된다.</p>

<pre><code>(venv)$ deactivate
$
</code></pre>

<h3>
<a name="1-2-flask-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0" class="anchor" href="#1-2-flask-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0"><span class="octicon octicon-link"></span></a>1-2. Flask 설치하기</h3>

<p>Flask는 <code>pip</code> 명령어로 쉽게 설치할 수 있다. 가상환경이 활성화된 상태에서 <code>pip</code> 명령어를 통해 설치한 패키지들은 가상환경 세팅폴더로 지정된 <code>./venv/lib/python2.7/site-packages/</code> 디렉토리에 저장된다.</p>

<pre><code>(venv)$ pip install flask
Downloading/unpacking flask
  Downloading Flask-0.10.1.tar.gz (544kB): 544kB downloaded
  Running setup.py egg_info for package flask
.
.
.
Successfully installed flask Werkzeug Jinja2 itsdangerous markupsafe
Cleaning up...
</code></pre>

<p>Flask가 제대로 설치되었는지 여부는 <code>pip list</code> 명령어를 통해 확인할 수 있다.</p>

<pre><code>(venv)$ pip list
Flask (0.10.1)
itsdangerous (0.23)
Jinja2 (2.7.1)
MarkupSafe (0.18)
Werkzeug (0.9.4)
wsgiref (0.1.2)
</code></pre>

<p>Flask를 설치하면 Jinja2, Werkzeug 등 다른 패키지들도 함께 설치되는데, 이는 Flask가 해당 패키지들을 기본적으로 사용하고 있기 때문이다. <a title="Jinja2 Documentation">Jinja2</a>는 템플릿 엔진이고, <a title="Werkzeug Documentation">Werkzeug</a>는 WSGI 툴킷이다.</p>

<h3>
<a name="1-3-hello-world-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0" class="anchor" href="#1-3-hello-world-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0"><span class="octicon octicon-link"></span></a>1-3. Hello, World! 출력하기</h3>

<p>가장 기본적인 예제를 만들어보자. 이 예제는 <a href="http://flask.pocoo.org/">Flask 공식 웹사이트</a>의 메인에도 있는 예제이다.</p>

<p>작업환경의 루트폴더에 hello.py라는 파일을 만들어보자. 이 파일의 이름이 여러분이 만드는 Flask 애플리케이션의 이름이 될 것이다. hello.py에는 아래의 내용을 입력하면 된다.</p>

<pre><code>from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run()
</code></pre>

<p>저장 후, 해당 파일을 python으로 실행해보자.</p>

<pre><code>(venv)$ python hello.py
 * Running on http://127.0.0.1:5000/
</code></pre>

<p>Flask 웹서버가 로컬호스트(127.0.0.1)의 5000번 포트에서 실행되고 있다는 말이 나온다. 인터넷 브라우저를 켜서 주소창에 <a href="http://127.0.0.1:5000">http://127.0.0.1:5000</a>를 입력해서 들어가면 'Hello, World!'라는 텍스트가 보일 것이다. 실행중인 애플리케이션을 종료하려면 <code>Ctrl</code>키와 <code>C</code> 키를 함께 누르면 된다.</p>

<h4>
<a name="host%EC%99%80-port-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0" class="anchor" href="#host%EC%99%80-port-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0"><span class="octicon octicon-link"></span></a>Host와 Port 직접 설정하기</h4>

<p>host의 기본값은 '127.0.0.1'이고, port의 기본값은 5000이다. 만약 로컬환경이 아니라면, <code>app.run()</code> 함수의 인자로 host와 port를 직접 넣어주면 된다.</p>

<pre><code>app.run(host='0.0.0.0', port=8080)
</code></pre>

<h4>
<a name="debug-mode%EB%A1%9C-flask-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0" class="anchor" href="#debug-mode%EB%A1%9C-flask-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0"><span class="octicon octicon-link"></span></a>Debug Mode로 Flask 실행하기</h4>

<p><code>app.run()</code> 함수에 <code>debug=True</code> 옵션을 주면 디버그모드로 Flask를 실행할 수 있다. 디버그모드로 실행할 경우 메모리를 많이 먹게 되고 성능이 저하되므로 런칭시에는 Debug 옵션을 빼주도록 하자.</p>

<hr><h2>
<a name="2-flask-%EC%9D%B5%ED%9E%88%EA%B8%B0" class="anchor" href="#2-flask-%EC%9D%B5%ED%9E%88%EA%B8%B0"><span class="octicon octicon-link"></span></a>2. Flask 익히기</h2>

<h3>
<a name="2-1-route" class="anchor" href="#2-1-route"><span class="octicon octicon-link"></span></a>2-1. Route</h3>

<p>Flask에서는 매우 직관적인 URL Routing을 지원한다. 첫 번째 Hello World 예제에서도 볼 수 있듯, <code>@app.route</code> 데코레이터(Decorator)로 함수를 지정하면, 그 함수에서 리턴한 결과가 실제로 클라이언트로 전송된다.</p>

<p>그럼, 작성한 코드를 아래와 같이 변경해보자.</p>

<pre><code>@app.route('/')
def index():
    return 'It Works!'

@app.route('/hello')
def hello():
    return 'Hello, World!'
</code></pre>

<p>그리고, 인터넷 브라우저에서 <a href="http://127.0.0.1:5000">http://127.0.0.1:5000</a>과 <a href="http://127.0.0.1:5000/hello">http://127.0.0.1:5000/hello</a>에 접속해보자. 각각 'It Works!'와 'Hello, World!'가 보이는 것을 확인할 수 있다.</p>

<p>이번에는 동적 URL을 다루기 위해 아래의 코드를 추가시켜보자.</p>

<pre><code>@app.route('/user/&lt;username&gt;')
def get_user(username):
    return 'User %s' % username
</code></pre>

<p>인터넷 브라우저에서 <a href="http://127.0.0.1:5000/user/xoul">http://127.0.0.1:5000/user/xoul</a>로 접속해보자.'User xoul'이라는 결과를 볼 수 있다. URL을 지정해줄 때 '&lt;'와 '&gt;' 사이에 있는 변수가 함수의 인자로 넘어오게 된다. 변수가 여러 개라면 여러 개의 함수 인자를 선언해주면 된다.</p>

<p>만약 변수가 정수형이라면, <code>int:</code>를 추가시켜주면 된다.</p>

<pre><code>@app.route('/post/&lt;int:post_id&gt;')
def get_post(post_id):
    return 'Post %d' % post_id
</code></pre>

<h4>
<a name="%ED%95%9C%EA%B8%80-%EB%8C%80%EC%9D%91%ED%95%98%EA%B8%B0" class="anchor" href="#%ED%95%9C%EA%B8%80-%EB%8C%80%EC%9D%91%ED%95%98%EA%B8%B0"><span class="octicon octicon-link"></span></a>한글 대응하기</h4>

<p>만약 username에 영문이 아닌 유니코드를 입력하게되면 Python에러가 출력될 것이다. 유니코드를 처리하지 않아서 발생하는 에러인데, hello.py의 제일 윗줄에 <code># -*- coding: utf-8 -*-</code>을 추가시켜주면 된다.</p>

<h3>
<a name="2-2-http-method" class="anchor" href="#2-2-http-method"><span class="octicon octicon-link"></span></a>2-2. HTTP Method</h3>

<p>HTTP에는 여러 개의 메소드가 있는데, 그 중 가장 많이 사용되는 것들은 GET, POST, PUT, DELETE이다. GET은 정보를 가져올 때, POST는 새로운 정보를 삽입할 때, PUT은 수정, 그리고 DELETE는 정보를 삭제할 때 사용하는 것이 가장 일반적인 사용법이다.</p>

<p>Flask에서는 각 URL별로 허용하는 메소드를 지정할 수 있고, 요청을 받은 메소드에 따라 다른 행동을 취하도록 개발할 수 있다. <code>@app.route</code> 데코레이터에서 <code>methods</code>에 메소드 리스트를 인자로 넘기면 그 함수에서는 해당 메소드만을 처리한다. 허용되지 않은 메소드로 요청을 보내면 '405 Method Not Allowed' 에러가 발생한다.</p>

<pre><code>@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'GET':
        return 'Show login form'

    elif request.method == 'POST':
        return 'Do login'
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/smarteen">smarteen</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-39738800-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>